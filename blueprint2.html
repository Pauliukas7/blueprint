
 <style>
        .span-bold {
        font-weight: bold;
        }
      input[type="checkbox"]:hover {
        cursor:pointer;
        }
			.selected {
        background: 	#F3F3F3;
        }
      .types-container {
        max-width: 45rem;
        display: flex;
        justify-content: flex-start;
        gap: 5px;
        width: 45rem;
      }

      .website-type {
        height: 10rem;
        width: 10rem;
				display: flex;
        justify-content:center;
        align-items:center;
        border: 0.5px solid black;
        border-radius: 5px;
      }
      .pagename-options-container {
        display: flex;
        width: 45rem;
      }

      .scripts-and-vars {

::-webkit-scrollbar {
  width: 5px;
}


::-webkit-scrollbar-track {
  box-shadow: inset 0 0 5px grey; 
  border-radius: 10px;
}
 
::-webkit-scrollbar-thumb {
  background: rgba(83, 167, 209, 1); 
  border-radius: 10px;
}

    
        display: flex;
        height: auto;
        position: relative;
				width: 60rem;

      }
      .variables- {
  			position: absolute;
    right: 0;
    height: 95%;
    overflow-y: scroll;
    width: 14rem;
    margin-top: 6px;
      }
      .code-toolbar {

				width: 46rem;
      }
      .input-with-question-popup-container {
        display: flex;
        align-items:center;
        position: relative;
        height: 21px;
        width:100%;
      }

      .input-with-question-popup-container > select {
        height: 2rem;
      }
      .input-with-question-popup-container {
        display: flex;
        position: relative;
        
        height: 21px;
      }
      .tracking-domain-information-text {
        margin-inline-start: 5px;
      }
      .question-mark-element {
        height: 21px;
        display: flex;
        align-items: center;
      }
      .question-mark-symbol {
        margin-inline: 6px;
        font-size: large;
        font-weight: bold;
      }
      .question-mark-element:hover .question-mark-symbol {
        color: #798297;
      }
			
      .question-mark-element .question-mark-hover-text {
        visibility: hidden;
        width: 100%;
        text-align: center;
        position: absolute;
        margin-left: 10px;
        z-index: 1;
        margin-left: 2rem;
        border: 1px solid rgba(83, 167, 209, 1);
        border-radius: 5px;
      }
      input::-webkit-outer-spin-button,
      input::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }



      .question-mark-element:hover {
        cursor: pointer;
      }
      .question-mark-element:hover span {
        visibility: visible;
      }

      .website-type:hover {
        cursor: pointer;
        background: 	#F3F3F3;
      }
      .checkbox:hover {
        cursor: pointer;
        cursor: pointer;
      }
      .checkbox {
        margin-right: 5px;
        }
      .page-option:hover {
        background-color: #fbfbf8;
        cursor: pointer;
      }
       
    </style>
<div class="container -mb-6" id="page-container">
  <div class="row row-lg">
    <div class="col pb-6">
      <nav class="font-size-md mt-6">
        <ol class="breadcrumbs">
          <li title="Adform">
            <a href="/hc/en-us">Homepage</a>
          </li>
          <li title="Release Notes">Site Tracking Blueprint</li>
        </ol>
      </nav>

      <header class="sm:flex justify-content-between">
        <h1 class="w-full md:mt-2">Site Tracking Blueprint</h1>
      </header>
      <section>
        <p>
        Site Tracking blueprint is a tool to quickly generate unique tracking point scripts for your Site Tracking setup. Select the type of website that you are going to implement tracking in. If there is no type that defines your website, select <span class="span-bold">Custom Website</span>. Ecommerce option also includes DCO Product retargeting template.
        </p>
        <p>
         <span class="span-bold">Tracking Points</span> are indicators of which part of your website you are tracking. For example, if you have a website <a href="https://www.example.com" target="_blank">www.example.com</a>, the tracking point named <span class="span-bold">Homepage</span> would be implemented on <a href="https://www.example.com" target="_blank">www.example.com</a> and a tracking point named <span class="span-bold">Product page</span> would be implemented on <a href="https://www.example.com" target="_blank">www.example.com/someproductURL</a>. When you implement a tracking script on a webpage (through a tag manager or other means) it will fire with every page load and count pageviews. You will have the corresponding <span class="span-bold">Tracking points</span> stats data in Adform, meaning you will know how many times your webpage was viewed/visited.
         </p>
        <p>
        You will need this information:
        <ul>
          <li>Tracking setup ID - you can find this by accessing your Adform account and navigating to <span class="span-bold">Advertisers & Data Providers</span> -><span class="span-bold"> Advertisers</span> -><span class="span-bold"> Tracking ID column (for your selected advertiser).
          <li>Tracking Domain - <a href="https://www.adformhelp.com/hc/en-us/articles/9740579553169" target="_blank">Click Here</a> to find about more about tracking domains</li>
          <li>Select or insert at least 1 Tracking Point name</li>
        </ul>
        </p>
      </section>
     
  </head>
  <body>
    <div id="types" class="types-container">
      <div class="website-type" id="casino">Casino</div>
      <div class="website-type" id="ecommerce">Ecommerce</div>
      <div class="website-type" id="custom">Custom Website</div>
    </div>

    <div class="pagename-options-container" id="options-container">
      <div class="pagenames" id="pagenames" hidden></div>

    </div>

    <div id="scripts" class="codes-container" hidden></div>

    <script>
      window.generateCodesButtonDisabled = true;
      window.dcoTemplateSelected = false;
      window.selectedPageNames = [];
      window.productLevelVars = {};
      window.orderLevelVars = {};
      window.generatedDomain = null;
      //Global state end
      
      //JS Variables for the existing HTML containers
      const websiteTypesContainer = document.getElementById("types");
      const optionsContainer = document.getElementById("options-container");
      const pageNamesContainer = document.getElementById("pagenames");
      const scriptsContainer = document.getElementById("scripts");
      //JS Variables end

      /*createPagesCheckboxList is a function that executes when you select a website type.
      An array of pagenames is passed to it and it generates page-option containers, which consist of:
      1. <input type="checkbox"> element
      2. <label> element for that specific input (with the pagename Text e.g. "Homepage")
      */
      function createPagesCheckboxList(pageNamesArray) {
        //Create the main "Generate Tracking Scripts" button
        const generateCodesButton = document.createElement("button");
        generateCodesButton.className ="button button-primary"
        generateCodesButton.innerText = "Generate Tracking Scripts";
        generateCodesButton.disabled = true;

        pageNamesContainer.innerHTML = "";
        let IDarray = [];
        window.numOfPagesChecked = 0;
        window.trackingIdNotEmpty = false;
        //For each pagename selecetd the following codeblock is executed
        pageNamesArray.forEach((pageName) => {
          //Create <input type="checkbox"> element
          const pageCheckbox = document.createElement("input");
          pageCheckbox.type = "checkbox";
          pageCheckbox.id = pageName.split(" ").join("").toLowerCase(); //e.g. "First time deposit" html element id will be "firsttimedeposit"
          IDarray.push(pageCheckbox.id);// Global HTML element ID array, which will be something like ["Homepage", "Basket page"] etc.
          pageCheckbox.className = "checkbox";
          pageCheckbox.value = pageName;
          pageCheckbox.onchange = () => {
            pageCheckbox.checked ? numOfPagesChecked++ : numOfPagesChecked--;
            if (
              (trackingIdNotEmpty && numOfPagesChecked > 0) ||
              (trackingIdNotEmpty && window.dcoTemplateSelected)
            ) {
              window.generateCodesButtonDisabled = false;
              generateCodesButton.disabled = false;
            } else {
              window.generateCodesButtonDisabled = true;
              generateCodesButton.disabled = true;
            }
          };
          //Create a label for every checkbox created. The label contains the pagename text e.g. "Homepage"
          const pageLabel = document.createElement("label");
          pageLabel.htmlFor = pageCheckbox.id;
          pageLabel.innerText = pageName;
          pageLabel.className = "checkbox";
          

          //Create a page-option container, which will hold the input checkbox and label
          const pageContainer = document.createElement("div");
          pageContainer.className = "page-option";

          //page-option container appends the checkbox and pagename text
          pageContainer.appendChild(pageCheckbox);
          pageContainer.appendChild(pageLabel);

          //If selected website type is "ecommerce" it also adds the "DCO Template" checkbox to the first "page-option" ("Homepage") container
          if (window.currentPage === "ecommerce" && pageName === "Homepage" ) {
            const dcoTemplateCheckbox = document.createElement("input");
          dcoTemplateCheckbox.type = "checkbox";
          dcoTemplateCheckbox.id = "dcoselection"
          dcoTemplateCheckbox.className = "checkbox";
          dcoTemplateCheckbox.value = "dcoselection";
       		dcoTemplateCheckbox.style = "margin-left: 2rem;"
      
          const dcoTemplateCheckboxLabel = document.createElement("label");
          dcoTemplateCheckboxLabel.htmlFor = dcoTemplateCheckbox.id;
          dcoTemplateCheckboxLabel.innerText = "DCO Product Retargeting template";
          dcoTemplateCheckboxLabel.className = "checkbox";
     
          pageContainer.appendChild(dcoTemplateCheckbox)
          pageContainer.appendChild(dcoTemplateCheckboxLabel)

          dcoTemplateCheckbox.onchange = () => {
          window.dcoTemplateSelected = dcoTemplateCheckbox.checked
            ? true
            : false;
          const pageNameDivs =
            pageNamesContainer.querySelectorAll(".page-option");

          if (dcoTemplateCheckbox.checked) {
            pageNameDivs.forEach((option) => {
              option.childNodes[0].disabled = true;
            });
          } else {
            pageNameDivs.forEach(
              (option) => (option.childNodes[0].disabled = false)
            );
          }

          if (
            (trackingIdNotEmpty && numOfPagesChecked > 0) ||
            (trackingIdNotEmpty && window.dcoTemplateSelected)
          ) {
            generateCodesButton.disabled = false;
            window.generateCodesButtonDisabled = false;
          } else {
            generateCodesButton.disabled = true;
            window.generateCodesButtonDisabled = true;
          }
        };
          }
          ////If selected website type is "ecommerce" - END
          
          /*pageNamesContainer <div id="pagenames"> is HTML element that sits in between website-type options and the generated scripts
          It will contain the pagenames list, custom pagename input field, "Add Another TP" button, Tracking Domain dropdown, Tracking ID input field,
          "Generate scripts button" */
          pageNamesContainer.appendChild(pageContainer);
          pageNamesContainer.appendChild(document.createElement("br"));
        });
        let custom_id_number = 0;
       
        custom_id_number++;

        //Custom pagename checkbox creation
        const customCheckbox = document.createElement("input");
        customCheckbox.type = "checkbox";
        customCheckbox.id = "custom" + custom_id_number;
        IDarray.push(customCheckbox.id);// Global HTML element ID array, which will be something like ["Homepage", "Basket page"] etc.
        customCheckbox.className = "checkbox";
        customCheckbox.value = "";
        customCheckbox.onchange = () => {
          if (customCheckbox.checked && customCheckbox.value.length > 0)
            numOfPagesChecked++;
          else if (!customCheckbox.checked && customCheckbox.value.length > 0)
            numOfPagesChecked--;

          if (
            (trackingIdNotEmpty && numOfPagesChecked > 0) ||
            (trackingIdNotEmpty && window.dcoTemplateSelected)
          ) {
            window.generateCodesButtonDisabled = false;
            generateCodesButton.disabled = false;
          } else {
            window.generateCodesButtonDisabled = true;
            generateCodesButton.disabled = true;
          }
        };
        //Custom pagename checkbox creation END

        //Custom pagename input field creation
        const customPageNameInputField = document.createElement("input");
        customPageNameInputField.placeholder = "Insert your TP name";
        const pageContainerCustom = document.createElement("div");
        pageContainerCustom.className = "page-option";
        pageContainerCustom.id = "page-option-custom" + custom_id_number;
        pageContainerCustom.appendChild(customCheckbox);
        pageContainerCustom.appendChild(customPageNameInputField);
        pageNamesContainer.appendChild(pageContainerCustom);
        pageNamesContainer.appendChild(document.createElement("br"));
        customPageNameInputField.onchange = () => {
          const currentValue = customPageNameInputField.value;
          customCheckbox.value = currentValue;
          if (customCheckbox.checked && customCheckbox.value.length > 0)
            numOfPagesChecked++;
          else if (customCheckbox.checked && customCheckbox.value.length === 0)
            numOfPagesChecked--;

          if (
            (trackingIdNotEmpty && numOfPagesChecked > 0) ||
            (trackingIdNotEmpty && window.dcoTemplateSelected)
          ) {
            window.generateCodesButtonDisabled = false;
            generateCodesButton.disabled = false;
          } else {
            window.generateCodesButtonDisabled = true;
            generateCodesButton.disabled = true;
          }
        };
        //Custom pagename input field creation - END

        //Button creation for "Add another TP" option
        const addCustomPageNameButton = document.createElement("button");
        addCustomPageNameButton.innerText = "Add another Tracking Point";
        addCustomPageNameButton.id = "addCustomPage";
        addCustomPageNameButton.className = "button button-secondary";
        

        //"Add another TP" button click listener:
        addCustomPageNameButton.addEventListener("click", () => {
          custom_id_number++;
          const newCustomPageContainer = pageContainerCustom.cloneNode(true);
          const clonedCheckbox = newCustomPageContainer.childNodes[0];
          clonedCheckbox.id = "custom" + custom_id_number;
          IDarray.push(clonedCheckbox.id);
          const clonedInputField = newCustomPageContainer.childNodes[1];
          clonedCheckbox.value = "";
          clonedCheckbox.checked = false;
          clonedInputField.value = "";
          clonedCheckbox.onchange = () => {
            if (clonedCheckbox.checked && clonedCheckbox.value.length > 0)
              numOfPagesChecked++;
            else if (!clonedCheckbox.checked && clonedCheckbox.value.length > 0)
              numOfPagesChecked--;

            if (
              (trackingIdNotEmpty && numOfPagesChecked > 0) ||
              (trackingIdNotEmpty && window.dcoTemplateSelected)
            ) {
              window.generateCodesButtonDisabled = false;
              generateCodesButton.disabled = false;
            } else {
              window.generateCodesButtonDisabled = true;
              generateCodesButton.disabled = true;
            }
          };

          clonedInputField.onchange = () => {
            const currentValue = clonedInputField.value;
            clonedCheckbox.value = currentValue;
            if (clonedCheckbox.checked && clonedCheckbox.value.length > 0)
              numOfPagesChecked++;
            else if (
              clonedCheckbox.checked &&
              clonedCheckbox.value.length === 0
            )
              numOfPagesChecked--;

            if (
              (trackingIdNotEmpty && numOfPagesChecked > 0) ||
              (trackingIdNotEmpty && window.dcoTemplateSelected)
            ) {
              window.generateCodesButtonDisabled = false;
              generateCodesButton.disabled = false;
            } else {
              window.generateCodesButtonDisabled = true;
              generateCodesButton.disabled = true;
            }
          };
          newCustomPageContainer.id = "page-option-custom" + custom_id_number;
          const thisButton = Array.from(pageNamesContainer.childNodes).find(
            (element) => element.id === "addCustomPage"
          );
          pageNamesContainer.insertBefore(newCustomPageContainer, thisButton);
          pageNamesContainer.insertBefore(
            document.createElement("br"),
            thisButton
          );
        });
        //"Add another TP" button click listener - END

        //pageNamesContainer <div id="pagenames"> sitting between website-type options and generated scripts -appends "Add another TP" button
        pageNamesContainer.appendChild(addCustomPageNameButton);
        pageNamesContainer.appendChild(document.createElement("br"));
        pageNamesContainer.appendChild(document.createElement("br"));

      
        
      
        const p = document.createElement("p")
        p.innerText = "Enter your tracking setup ID:"
         pageNamesContainer.appendChild(p);

         //Tracking setup ID input field creation (with question mark hover element)
         const trackingSetupIdQuestionMark = document.createElement("div");
        trackingSetupIdQuestionMark.className = "question-mark-element";

        trackingSetupIdQuestionMark.innerHTML =
          `<span class='question-mark-symbol span-bold'>?</span> <span class="question-mark-hover-text">Your tracking setup ID can be found by navigating to your Adform account -> <span class="span-bold">Advertisers & Data Providers</span> -><span class="span-bold"> Advertisers</span> -><span class="span-bold"> Tracking ID column (for your selected advertiser).`;
          const trackingSetupIdInputContainer = document.createElement("div");
          trackingSetupIdInputContainer.className =
          "input-with-question-popup-container";
          
          const trackingSetupIdField = document.createElement("input");
          trackingSetupIdField.type = "number";
          ////Tracking setup ID input field creation (with question mark hover element) - END 



          trackingSetupIdField.oninput = () => {
            trackingIdFieldNotEmpty = trackingSetupIdField.value.length > 3;
            trackingIdFieldNotEmpty
            ? (window.trackingIdNotEmpty = true)
            : (window.trackingIdNotEmpty = false);
            
            if (
              (trackingIdNotEmpty && numOfPagesChecked > 0) ||
              (trackingIdNotEmpty && window.dcoTemplateSelected)
              ) {
                window.generateCodesButtonDisabled = false;
                generateCodesButton.disabled = false;
              } else {
                window.generateCodesButtonDisabled = true;
                generateCodesButton.disabled = true;
              }
            };
            
            
            trackingSetupIdInputContainer.appendChild(trackingSetupIdField);
            trackingSetupIdInputContainer.appendChild(trackingSetupIdQuestionMark);
            
        //Tracking domain dropdown element creation  
        const trackingDomainContainer = document.createElement("div");
        trackingDomainContainer.className =
          "input-with-question-popup-container";

        const trackingDomainInformationText = document.createElement("div");
        trackingDomainInformationText.innerHTML =
          "<a href='https://www.adformhelp.com/hc/en-us/articles/9740579553169' target='_blank'>Click here</a> for more information on tracking domains";
        trackingDomainInformationText.className = "tracking-domain-information-text"
        const trackingDomainDropdown = document.createElement("select");
        trackingDomainDropdown.id = "trackingdomains";

        const domainAmericas = document.createElement("option");
        domainAmericas.value = "a2.adform.net";
        domainAmericas.innerText = "Americas (a2.adform.net)";

        const domainAPAC = document.createElement("option");
        domainAPAC.value = "asia.adform.net";
        domainAPAC.innerText = "APAC (asia.adform.net)";

        const domainCHINA = document.createElement("option");
        domainCHINA.value = "adfnet.cn";
        domainCHINA.innerText = "China (adfnet.cn)";

        const domainEMEA = document.createElement("option");
        domainEMEA.value = "track.adform.net";
        domainEMEA.innerText = "EMEA (track.adform.net)";

        const domainEMEAServer = document.createElement("option");
        domainEMEAServer.value = "server.adform.net";
        domainEMEAServer.innerText = "EMEA (server.adform.net)";

        const domainGLOBAL = document.createElement("option");
        domainGLOBAL.value = "a1.adform.net";
        domainGLOBAL.innerText = "GLOBAL (a1.adform.net)";

        trackingDomainDropdown.appendChild(domainEMEA);
        trackingDomainDropdown.appendChild(domainAmericas);
        trackingDomainDropdown.appendChild(domainAPAC);
        trackingDomainDropdown.appendChild(domainCHINA);
        trackingDomainDropdown.appendChild(domainEMEAServer);
        trackingDomainDropdown.appendChild(domainGLOBAL);
        //Tracking domain dropdown element creation  - END

        window.trackingDomain = trackingDomainDropdown.value;
      
        //"Tracking domain changed" element creation - it appears when scripts are already generated but user changes tracking domain
       const trackingDomainChangedTextElement = document.createElement("div");
      trackingDomainChangedTextElement.innerText =
          "Generate Scripts again to apply new Domain";
      trackingDomainChangedTextElement.className = "tracking-domain-information-text"
      trackingDomainChangedTextElement.id = 'tracking-domain-changed-text'
      trackingDomainChangedTextElement.hidden = true
      
      
			trackingDomainContainer.appendChild(trackingDomainDropdown);
      trackingDomainContainer.appendChild(trackingDomainInformationText);
      trackingDomainContainer.appendChild(trackingDomainChangedTextElement);
      
      trackingDomainDropdown.onchange = () => {
      const selectedValue = trackingDomainDropdown.value
      window.trackingDomain = selectedValue;
      const scriptsAlreadyGenerated = document.getElementById('scripts').hidden === false
      if (scriptsAlreadyGenerated) {
      	if (window.trackingDomain != window.generatedDomain) trackingDomainChangedTextElement.hidden = false
      	else trackingDomainChangedTextElement.hidden = true
      }
      }

          
        pageNamesContainer.appendChild(trackingSetupIdInputContainer);
        pageNamesContainer.appendChild(document.createElement("br"));
        pageNamesContainer.appendChild(document.createElement("br"));
        pageNamesContainer.appendChild(trackingDomainContainer);
        pageNamesContainer.appendChild(document.createElement("br"));
        pageNamesContainer.appendChild(document.createElement("br"));
        pageNamesContainer.appendChild(generateCodesButton);


        //GenerateScripts is a long function that generates the actual codes. It takes in pagenames array, tracking setup ID and tracking domain arguments.
        function GenerateScripts(
          pageNamesArray,
          trackingSetupID,
          trackingDomain
        ) {
          let scriptNodeList = [];

          //If DCO Checkbox is ticked, the paganames automatically overriden and become "Product page", "Basket Page" and "Purchase completed"
          if (window.dcoTemplateSelected) {
            pageNamesArray = [
              "Product Page",
              "Basket Page",
              "Purchase Completed"
            ];
          }
window.generatedDomain = window.trackingDomain
const domainChangedText = document.getElementById('tracking-domain-changed-text')
      domainChangedText.hidden = true

          //For each pagename create Adform script and a variables menu
          pageNamesArray.forEach((pageName) => {

      			/*<pre>
              <code></code>
              <pre>
              block will automatically be put inside <div class="code-toolbar"> container
              */
            const pre = document.createElement("pre");
            pre.className = "language-js hljs javascript code-snippet";//zendesk classes
            const code = document.createElement("code");
            const pageClassName = pageName.replaceAll(" ", "");
            code.className = pageClassName;
      			code.classList.add("language-js")//zendesk classes

            //Adform tracking script rendered:
            code.innerHTML = `&#x3C;!-- Adform Tracking Code BEGIN --&#x3E;
&#x3C;script type=&#x22;text/javascript&#x22;&#x3E;
    window._adftrack = Array.isArray(window._adftrack) ? window._adftrack : (window._adftrack ? [window._adftrack] : [])
    window._adftrack.push({
        HttpHost: '${trackingDomain}',
        pm: ${trackingSetupID},
        divider: encodeURIComponent('|'),
        pagename: encodeURIComponent('${pageName}')
        });
    (function () { var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = 'https://s2.adform.net/banners/scripts/st/trackpoint-async.js'; var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x); })();
&#x3C;/script&#x3E;
&#x3C;noscript&#x3E;
    &#x3C;p style="margin:0;padding:0;border:0;">
        &#x3C;img src="https://${trackingDomain}/Serving/TrackPoint/?pm=${trackingSetupID}&ADFPageName=${encodeURIComponent(
              pageName
            )}&ADFdivider=|" width="1" height="1" alt="" />
    &#x3C;/p&#x3E;
&#x3C;/noscript&#x3E;
&#x3C;!-- Adform Tracking Code END --&#x3E;`;

            //<div class="scripts-and-vars"> is the container element for rendered code + variables menu
            const scriptsDiv = document.createElement("div");
            scriptsDiv.className = "scripts-and-vars";
            const varsDiv = document.createElement("div");

            //Variables menu
            varsDiv.className = "variables- " + pageClassName;
            varsDiv.innerHTML = `
              Variables
        <br />
        <br />
        <input type="checkbox" value="sales" id="sales" data-level="order" />
        <label for="sales">Sales (number)</label>
        <br />
        <input
          type="checkbox"
          value="orderid"
          id="orderid"
          data-level="order"
        />
        <label for="orderid">Order ID</label>
        <br />
        <br />
        <div>Product variables:</div>
        <br />
        <input
          type="checkbox"
          value="categoryname"
          id="categoryname"
          data-level="product"
        />
        <label for="categoryname">Category Name (text)</label>
        <br />
        <input
          type="checkbox"
          value="categoryid"
          id="categoryid"
          data-level="product"
        />
        <label for="categoryid">Category ID (text)</label>
        <br />
        <input
          type="checkbox"
          value="productname"
          id="productname"
          data-level="product"
        />
        <label for="productname">Product Name (text)</label>
        <br />
        <input
          type="checkbox"
          value="productid"
          id="productid"
          data-level="product"
        />
        <label for="salproductides">Product ID(text)</label>
        <br />
        <input
          type="checkbox"
          value="weight"
          id="weight"
          data-level="product"
        />
        <label for="weight">Weight (number)</label>
        <br />
        <input type="checkbox" value="step" id="step" data-level="product" />
        <label for="step">Step (number)</label>
        <br />
        <input
          type="checkbox"
          value="productcount"
          id="productcount"
          data-level="product"
        />
        <label for="productcount">Product Count (number)</label>
        <br />
        <input
          type="checkbox"
          value="productsales"
          id="productsales"
          data-level="product"
        />
        <label for="productsales">Product Sales (number)</label>
        <br />
        <input
          type="checkbox"
          value="productcount"
          id="productcount"
          data-level="product"
        />
        <label for="productcount">Product Count (number)</label>
        <br />
        <br />
      <div>Custom variables:</div>
		<br />
      <input
          type="checkbox"
          value="basketsize"
          id="basketsize"
          data-level="order"
        />
        <label for="basketsize">Basket Size (number)</label>
          <br />
      <input
          type="checkbox"
          value="country"
          id="country"
          data-level="order"
        />
        <label for="country">Country (text)</label>
          <br />
      <input
          type="checkbox"
          value="currency"
          id="currency"
          data-level="order"
        />
        <label for="currency">Currency (text)</label>
          <br />
      <br />
        <input
          type="checkbox"
          value="sv1"
          id="sv1"
          data-level="order"
        />
        <label for="sv1">sv1 (text)</label>
        <select id="data-level-sv1">
          <option>Order</option>
          <option>Product</option>
          </select>
          <br />

          <input
          type="checkbox"
          value="sv2"
          id="sv2"
          data-level="order"
        />
        <label for="sv2">sv2 (text)</label>
        <select id="data-level-sv2">
          <option>Order</option>
          <option>Product</option>
          </select>
          <br />

          <input
          type="checkbox"
          value="sv3"
          id="sv3"
          data-level="order"
        />
        <label for="sv3">sv3 (text)</label>
        <select id="data-level-sv3">
          <option>Order</option>
          <option>Product</option>
          </select>
          <br />

          <input
          type="checkbox"
          value="sv4"
          id="sv4"
          data-level="order"
        />
        <label for="sv4">sv4 (text)</label>
        <select id="data-level-sv4">
          <option>Order</option>
          <option>Product</option>
          </select>
          <br />

          <input
          type="checkbox"
          value="sv5"
          id="sv5"
          data-level="order"
        />
        <label for="sv5">sv5 (text)</label>
        <select id="data-level-sv5">
          <option>Order</option>
          <option>Product</option>
          </select>
          <br />

          <input
          type="checkbox"
          value="sv6"
          id="sv6"
          data-level="order"
        />
        <label for="sv6">sv6 (text)</label>
        <select id="data-level-sv6">
          <option>Order</option>
          <option>Product</option>
          </select>
          <br />

          <input
          type="checkbox"
          value="sv7"
          id="sv7"
          data-level="order"
        />
        <label for="sv7">sv7 (text)</label>
        <select id="data-level-sv7">
          <option>Order</option>
          <option>Product</option>
          </select>
          <br />

          <input
          type="checkbox"
          value="sv9"
          id="sv9"
          data-level="order"
        />
        <label for="sv9">sv9 (text)</label>
        <select id="data-level-sv9">
          <option>Order</option>
          <option>Product</option>
          </select>
          <br />
      <input
          type="checkbox"
          value="sv10"
          id="sv10"
          data-level="order"
        />
        <label for="sv10">sv10 (text)</label>
        <select id="data-level-sv10">
          <option>Order</option>
          <option>Product</option>
          </select>
          <br />
      <input
          type="checkbox"
          value="sv11"
          id="sv11"
          data-level="order"
        />
        <label for="sv11">sv11 (text)</label>
        <select id="data-level-sv11">
          <option>Order</option>
          <option>Product</option>
          </select>
          <br />
      <input
          type="checkbox"
          value="sv12"
          id="sv12"
          data-level="order"
        />
        <label for="sv12">sv12 (text)</label>
        <select id="data-level-sv12">
          <option>Order</option>
          <option>Product</option>
          </select>
          <br />
      <input
          type="checkbox"
          value="sv13"
          id="sv13"
          data-level="order"
        />
        <label for="sv13">sv13 (text)</label>
        <select id="data-level-sv13">
          <option>Order</option>
          <option>Product</option>
          </select>
          <br />
      <input
          type="checkbox"
          value="sv14"
          id="sv14"
          data-level="order"
        />
        <label for="sv14">sv14 (text)</label>
        <select id="data-level-sv14">
          <option>Order</option>
          <option>Product</option>
          </select>
          <br />
      <input
          type="checkbox"
          value="sv15"
          id="sv15"
          data-level="order"
        />
        <label for="sv15">sv15 (text)</label>
        <select id="data-level-sv15">
          <option>Order</option>
          <option>Product</option>
          </select>
          <br />
      <input
          type="checkbox"
          value="sv16"
          id="sv16"
          data-level="order"
        />
        <label for="sv16">sv16 (text)</label>
        <select id="data-level-sv16">
          <option>Order</option>
          <option>Product</option>
          </select>
          <br />
      <input
          type="checkbox"
          value="sv17"
          id="sv17"
          data-level="order"
        />
        <label for="sv17">sv17 (text)</label>
        <select id="data-level-sv17">
          <option>Order</option>
          <option>Product</option>
          </select>
          <br />
      <input
          type="checkbox"
          value="sv18"
          id="sv18"
          data-level="order"
        />
        <label for="sv18">sv18 (text)</label>
        <select id="data-level-sv18">
          <option>Order</option>
          <option>Product</option>
          </select>
          <br />
      <input
          type="checkbox"
          value="sv18"
          id="sv18"
          data-level="order"
        />
        <label for="sv18">sv18 (text)</label>
        <select id="data-level-sv18">
          <option>Order</option>
          <option>Product</option>
          </select>
          <br />
      <input
          type="checkbox"
          value="sv19"
          id="sv19"
          data-level="order"
        />
        <label for="sv19">sv19 (text)</label>
        <select id="data-level-sv19">
          <option>Order</option>
          <option>Product</option>
          </select>
          <br />
      
        `;
            let variablesContainerElements;

            /*renderDOM function is executed with every variable checkbox onchange and variable level onchange. It is executed for each individual script rendered, 
            meaning if there is "Homepage" and "Product page" (total of 2 scripts) rendered, this renderDOM function function acts individually for each of those blocks.
            If a user selects a variable in Homepage variables menu, it will only affect the code in Homepage script, it will not touch Products page
            It has 4 if blocks:
            - if there are both order and product level vars selected 
            - if there is only order level vars selected
            - if there is only product level vars selected
            - if there are no vars selected (when you had variables selected, but untick all of them) - Generates same template as "Generate Scripts button"
             */


             /*-------------IMPORTANT---------------------
             the rendered template literal string (with `backticks` instead of "quotes") is whitespace sensitive, meaning if you eliminate/edit whitespace, it will also reflect in 
             the rendered Adform script
             for example:
             order: {
                itms:
             }
             the left margin of "itms" is what is referred here as whitespace.
             */
            function renderDOM() {

              
              if (orderVars.length > 0 || productVars.length > 0) {
                //If only order level vars are selected
                if (orderVars.length > 0 && productVars.length === 0) {
                  let variablesString = "";
                  for (var key of orderVars) {
                    const index = orderVars.indexOf(key);
                    if (index < orderVars.length - 1) {
                      variablesString =
                        variablesString +
                        `${key}: '&#x3C;insert ${key} value here&#x3E;',` +
                        "\n" +
                        "          ";
                    } else {
                      variablesString =
                        variablesString +
                        `${key}: '&#x3C;insert ${key} value here&#x3E;'`;
                    }
                  }
                  document.querySelector(
                    `.${pageClassName}`
                  ).innerHTML = `&#x3C;!-- Adform Tracking Code BEGIN --&#x3E;
&#x3C;script type=&#x22;text/javascript&#x22;&#x3E;
    window._adftrack = Array.isArray(window._adftrack) ? window._adftrack : (window._adftrack ? [window._adftrack] : [])
    window._adftrack.push({
        HttpHost: '${trackingDomain}',
        pm: ${trackingSetupID},
        divider: encodeURIComponent('|'),
        pagename: encodeURIComponent('${pageName}'),
        order: {
          ${variablesString}
        }
        });
    (function () { var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = 'https://s2.adform.net/banners/scripts/st/trackpoint-async.js'; var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x); })();
&#x3C;/script&#x3E;
&#x3C;noscript&#x3E;
    &#x3C;p style="margin:0;padding:0;border:0;">
        &#x3C;img src="https://${trackingDomain}/Serving/TrackPoint/?pm=${trackingSetupID}&ADFPageName=${encodeURIComponent(
                    pageName
                  )}&ADFdivider=|" width="1" height="1" alt="" />
    &#x3C;/p&#x3E;
&#x3C;/noscript&#x3E;
&#x3C;!-- Adform Tracking Code END --&#x3E;`;
                }
                Prism.highlightAll()
              }
              ////If only product level vars are selected
              if (orderVars.length === 0 && productVars.length > 0) {
                let variablesString = "";
                productVars.sort();
                for (var key of productVars) {
                  const index = productVars.indexOf(key);
                  if (index < productVars.length - 1) {
                    variablesString =
                      variablesString +
                      `${key}:  ${
                        key === "step"
                          ? window.dcoTemplateSelected
                            ? `${stepValue[pageClassName]},`
                            : `'&#x3C;insert ${key} value here&#x3E;',`
                          : `'&#x3C;insert ${key} value here&#x3E;',`
                      } ` +
                      "\n" +
                      "              ";
                  } else {
                    variablesString =
                      variablesString +
                      `${key}:  ${
                        key === "step"
                          ? window.dcoTemplateSelected
                            ? stepValue[pageClassName]
                            : `'&#x3C;insert ${key} value here&#x3E;'`
                          : `'&#x3C;insert ${key} value here&#x3E;'`
                      } `;
                  }
                }
                document.querySelector(
                  `.${pageClassName}`
                ).innerHTML = `&#x3C;!-- Adform Tracking Code BEGIN --&#x3E;
&#x3C;script type=&#x22;text/javascript&#x22;&#x3E;
    window._adftrack = Array.isArray(window._adftrack) ? window._adftrack : (window._adftrack ? [window._adftrack] : [])
    window._adftrack.push({
        HttpHost: '${trackingDomain}',
        pm: ${trackingSetupID},
        divider: encodeURIComponent('|'),
        pagename: encodeURIComponent('${pageName}'),
        order: {
          itms: [
            {
              ${variablesString}
            }
          ]     
        }
        });
    (function () { var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = 'https://s2.adform.net/banners/scripts/st/trackpoint-async.js'; var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x); })();
&#x3C;/script&#x3E;
&#x3C;noscript&#x3E;
    &#x3C;p style="margin:0;padding:0;border:0;">
        &#x3C;img src="https://${trackingDomain}/Serving/TrackPoint/?pm=${trackingSetupID}&ADFPageName=${encodeURIComponent(
                  pageName
                )}&ADFdivider=|" width="1" height="1" alt="" />
    &#x3C;/p&#x3E;
&#x3C;/noscript&#x3E;
&#x3C;!-- Adform Tracking Code END --&#x3E;`;
      Prism.highlightAll()
              }
              //If order & product level vars are selected
              if (orderVars.length > 0 && productVars.length > 0) {
                let orderVariablesString = "";
                orderVars.sort();
                for (var key of orderVars) {
                  const index = orderVars.indexOf(key);
                  if (index < orderVars.length - 1) {
                    orderVariablesString =
                      orderVariablesString +
                      `${key}: '&#x3C;insert ${key} value here&#x3E;',` +
                      "\n" +
                      "          ";
                  } else {
                    orderVariablesString =
                      orderVariablesString +
                      `${key}: '&#x3C;insert ${key} value here&#x3E;',`;
                  }
                }

                let productVariablesString = "";
                productVars.sort();
                for (var key of productVars) {
                  const index = productVars.indexOf(key);
                  if (index < productVars.length - 1) {
                    productVariablesString =
                      productVariablesString +
                      `${key}:  ${
                        key === "step"
                          ? window.dcoTemplateSelected
                            ? `${stepValue[pageClassName]},`
                            : `'&#x3C;insert ${key} value here&#x3E;',`
                          : `'&#x3C;insert ${key} value here&#x3E;',`
                      } ` +
                      "\n" +
                      "              ";
                  } else {
                    productVariablesString =
                      productVariablesString +
                      `${key}:  ${
                        key === "step"
                          ? window.dcoTemplateSelected
                            ? stepValue[pageClassName]
                            : `'&#x3C;insert ${key} value here&#x3E;'`
                          : `'&#x3C;insert ${key} value here&#x3E;'`
                      } `;
                  }
                }
                document.querySelector(
                  `.${pageClassName}`
                ).innerHTML = `&#x3C;!-- Adform Tracking Code BEGIN --&#x3E;
&#x3C;script type=&#x22;text/javascript&#x22;&#x3E;
    window._adftrack = Array.isArray(window._adftrack) ? window._adftrack : (window._adftrack ? [window._adftrack] : [])
    window._adftrack.push({
        HttpHost: '${trackingDomain}',
        pm: ${trackingSetupID},
        divider: encodeURIComponent('|'),
        pagename: encodeURIComponent('${pageName}'),
        order: {
          ${orderVariablesString}
          itms: [
            {
              ${productVariablesString}
            }
          ]     
        }
        });
    (function () { var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = 'https://s2.adform.net/banners/scripts/st/trackpoint-async.js'; var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x); })();
&#x3C;/script&#x3E;
&#x3C;noscript&#x3E;
    &#x3C;p style="margin:0;padding:0;border:0;">
        &#x3C;img src="https://${trackingDomain}/Serving/TrackPoint/?pm=${trackingSetupID}&ADFPageName=${encodeURIComponent(
                  pageName
                )}&ADFdivider=|" width="1" height="1" alt="" />
    &#x3C;/p&#x3E;
&#x3C;/noscript&#x3E;
&#x3C;!-- Adform Tracking Code END --&#x3E;`;
      Prism.highlightAll()
              }
              //if no wars are selected
              if (orderVars.length === 0 && productVars.length === 0) {
                document.querySelector(
                  `.${pageClassName}`
                ).innerHTML = `&#x3C;!-- Adform Tracking Code BEGIN --&#x3E;
&#x3C;script type=&#x22;text/javascript&#x22;&#x3E;
    window._adftrack = Array.isArray(window._adftrack) ? window._adftrack : (window._adftrack ? [window._adftrack] : [])
    window._adftrack.push({
        HttpHost: '${trackingDomain}',
        pm: ${trackingSetupID},
        divider: encodeURIComponent('|'),
        pagename: encodeURIComponent('${pageName}')
        });
    (function () { var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = 'https://s2.adform.net/banners/scripts/st/trackpoint-async.js'; var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x); })();
&#x3C;/script&#x3E;
&#x3C;noscript&#x3E;
    &#x3C;p style="margin:0;padding:0;border:0;">
        &#x3C;img src="https://${trackingDomain}/Serving/TrackPoint/?pm=${trackingSetupID}&ADFPageName=${encodeURIComponent(
                  pageName
                )}&ADFdivider=|" width="1" height="1" alt="" />
    &#x3C;/p&#x3E;
&#x3C;/noscript&#x3E;
&#x3C;!-- Adform Tracking Code END --&#x3E;`;
Prism.highlightAll()
              }
            }

            //global window variables states for each page name
            window.orderLevelVars[`${pageClassName}`] = [];
            window.productLevelVars[`${pageClassName}`] = [];
            
            //same global vars put into JS variables
            const orderVars = window.orderLevelVars[`${pageClassName}`];
            const productVars = window.productLevelVars[`${pageClassName}`];

            //setTimeout workaround for adding event listeners to HTML elements created in real time with renderDOM
            setTimeout(() => {
              variablesContainerElements = varsDiv.childNodes;

              levelVarsSelectElements = varsDiv.querySelectorAll("select");

              levelVarsSelectElements.forEach((selection) => {
                const variableElementId = selection.id.split("data-level-")[1];
                const variableCheckbox =
                  document.getElementById(variableElementId);
                selection.onchange = () => {
                  const dataSetAfterChange = selection.value.toLowerCase();

                  variableCheckbox.dataset.level = dataSetAfterChange;

                  if (variableCheckbox.checked) {
                    if (dataSetAfterChange === "product") {
                      const elementIndex = orderVars.indexOf(
                        variableCheckbox.value
                      );
                      orderVars.splice(elementIndex, 1);
                      productVars.push(variableCheckbox.value);
                    } else {
                      const elementIndex = productVars.indexOf(
                        variableCheckbox.value
                      );
                      productVars.splice(elementIndex, 1);
                      orderVars.push(variableCheckbox.value);
                    }
                  }
                  renderDOM();

                };
              });

              variablesContainerElements.forEach((element) => {
                if (element.nodeName === "INPUT") {
                  if (window.dcoTemplateSelected) {
                    if (
                      element.value === "productid" ||
                      element.value === "step"
                    ) {
                      productVars.push(element.value);
                      element.checked = true;
                    }
                  }
                  renderDOM();
                  element.onchange = () => {
                    if (element.checked) {
                      if (element.dataset.level === "order") {
                        orderVars.push(element.value);
                      } else {
                        productVars.push(element.value);
                      }
                    } else {
                      if (element.dataset.level === "order") {
                        const elementIndex = orderVars.indexOf(element.value);
                        orderVars.splice(elementIndex, 1);
                      } else {
                        const elementIndex = productVars.indexOf(element.value);
                        productVars.splice(elementIndex, 1);
                      }
                    }

                    renderDOM();
                  };
                }
              });
            }, 0);


            pre.appendChild(code);
      		  const pagenameDiv = document.createElement('div')
      pagenameDiv.innerHTML = `<p>Tracking Point <span class="span-bold">${pageName}</span>: </p>`
      const parentDiv = document.createElement('div')
      parentDiv.appendChild(pagenameDiv)
            scriptsDiv.appendChild(pre);
            scriptsDiv.appendChild(varsDiv);
      parentDiv.appendChild(scriptsDiv)
            scriptNodeList.push(parentDiv);
          });
          scriptsContainer.innerHTML = "";
          scriptNodeList.forEach((node) => {
    
      
      scriptsContainer.appendChild(node)
      scriptsContainer.appendChild(document.createElement("br"))
      });
          scriptsContainer.hidden = false;
        }


        //"Generate Scripts" button event listener
        generateCodesButton.addEventListener("click", () => {
          window.selectedPageNames = [];
          //IDarray holds all rendered paganame HTML element ids like "homepage" "productpage" etc.
          IDarray.forEach((ID) => {
            //Check if that element is "checked"
            const pageName = document.getElementById(ID);
            if (pageName.checked && pageName.value.length > 0)
            //if "checked" push to selectedPageNames global array
              window.selectedPageNames.push(pageName.value);
          });
          //generate scripts with selected page names
          GenerateScripts(
            window.selectedPageNames,
            trackingSetupIdField.value,
            window.trackingDomain
          );
      
        });
      }
   


      const casinoType = document.getElementById("casino");
      const ecommerceType = document.getElementById("ecommerce");
      const customType = document.getElementById("custom");


      const casinoOptions = [
        "Homepage",
        "Registration",
        "First Time Deposit",
        "Deposit",
        "Game page"
      ];
      const ecommerceOptions = [
        "Homepage",
        "Product Page",
        "Basket Page",
        "Check-out page",
        "Purchase Completed"
      ];

      const customOptions = ["Homepage"];

      //Each website type element on click generates the corresponding page names options
      casinoType.addEventListener("click", () => {
      casinoType.classList.add("selected")
      ecommerceType.classList.remove("selected")
      customType.classList.remove("selected")
        if (window.currentPage !== "casino") {
          window.currentPage = "casino";
          createPagesCheckboxList(casinoOptions);
          pageNamesContainer.hidden = false;
          scriptsContainer.hidden = true;
          window.dcoTemplateSelected = false;
        } else {
          pageNamesContainer.hidden = !pageNamesContainer.hidden;
        }
        if (pageNamesContainer.hidden) {
          scriptsContainer.hidden = true;
        }
      });

      //Each website type element on click generates the corresponding page names options
      ecommerceType.addEventListener("click", () => {
      ecommerceType.classList.add("selected")
      casinoType.classList.remove("selected")
      customType.classList.remove("selected")
        if (window.currentPage !== "ecommerce") {
          window.currentPage = "ecommerce";
          createPagesCheckboxList(ecommerceOptions);
          pageNamesContainer.hidden = false;
;
          scriptsContainer.hidden = true;
        } else {
          pageNamesContainer.hidden = !pageNamesContainer.hidden;

        }

        if (pageNamesContainer.hidden) {

          scriptsContainer.hidden = true;
        }
      });
const dcoSelectionElement = document.getElementById("dcoselection");
      const dcoSelectionElementLabel =
        document.getElementById("dcoselectionlabel");


        //Each website type element on click generates the corresponding page names options
      customType.addEventListener("click", () => {
      customType.classList.add("selected")
      ecommerceType.classList.remove("selected")
      casinoType.classList.remove("selected")
        if (window.currentPage !== "custom") {
          window.currentPage = "custom";
          createPagesCheckboxList(customOptions);
          pageNamesContainer.hidden = false;
          scriptsContainer.hidden = true;
          window.dcoTemplateSelected = false;
        } else {
          pageNamesContainer.hidden = !pageNamesContainer.hidden;
        }
        if (pageNamesContainer.hidden) {
          scriptsContainer.hidden = true;
        }
      });
    </script>